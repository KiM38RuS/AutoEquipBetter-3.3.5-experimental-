# AutoEquipBetter-3.3.5-experimental-
Этот проект является попыткой сделать с помощью нейросетей аддон для World of Warcraft версии 3.3.5, который будет автоматически надевать на персонажа броню и оружие с лучшими характеристиками при их появлении в сумке.

Главная проблема на данный момент - аддон предлагает персонажам вещи, которые они не могут надеть из-за отсутствия соответствующего навыка, например низкоуровневому охотнику предлагает надеть кольчугу, хотя он может носить только ткань и кожу

Ожидаемый функционал аддона и его подводные камни:
1) Поиск в сумках лучшего по характеристикам снаряжения, сравнение с надетой экипировкой и автоматическое надевание, причём если в сумке несколько предметов, предназначенных для одного слота, например пояс, то сначала они сравниваются друг с другом, исключая предметы, не предназначенные для класса персонажа: 
- маги, чернокнижники и жрецы могут носить только тканевые доспехи;
- щиты могут быть экипированы только воинами, паладинами и шаманами;
- охотники, разбойники и шаманы до 40 уровня могут носить только ткань и кожу, а по достижении 40 уровня - ещё и кольчугу;
- воины и паладины до 40 уровня могут носить все доспехи кроме латных, а по достижении - ещё и латные;
- рыцари смерти могут носить все доспехи;
- стрелы могут быть экипированы только охотниками, воинами и разбойниками при наличии лука или арбалета;
- патроны могут быть экипированы только охотниками, воинами и разбойниками при наличии огнестрельного оружия;
- метательное оружие может быть использовано только охотниками, воинами и разбойниками;

а уже потом лучший из них сравнивается с надетым предметом.
При этом нужно учесть, что в состоянии боя персонаж не может поменять никакое снаряжение кроме оружия.
Также нужно, чтобы аддон экипировал вещи, слоты в инвентаре для которых пустые (с учётом вышеописанных ограничений классов персонажей).

2) При сравнении предметов выводится окно поверх всех других окон, в котором будут отображены иконки надетой вещи и предлагаемой, названия этих вещей с цветом текста, соответствующим качеству вещи - серый, белый и т. д., причём текст левого и правого предмета должен не накладываться друг на друга и переноситься на следующую строку в случае если он выходит за рамку окна сравнения; под текстом названия предмета должен быть выведен его класс (например: Ткань, Кожа, Кольчуга, Латы, Кольцо, Аксессуар, Лук, Стрелы, Огнестрел, Патроны, Щит, Метательное, Одноручный меч, Двуручный меч, Одноручный топор, Двуручный топор, Одноручное дробящее, Двуручное дробящее, Древковое, Посох, Жезл). Также будет отображено, какие характеристики будут увеличены или уменьшены при надевании, причём характеристики должны быть на русском языке и строка должна быть окрашена в зелёный цвет, если идёт повышение характеристик, и в красный цвет, если идёт понижение. При наведении на иконки должна появляться подсказка как при наведении на предмет в сумке.  Внизу окна должны быть кнопки "Надеть" и "Отмена". Над кнопкой отмены должна быть кнопка "Игнор", при нажатии на которую в отдельном файле в папке SavedVariables в папке персонажа в папке WTF\Account создаётся запись о том, что этот предмет этому персонажу предлагать не нужно. Если в сумках найдено несколько предметов, которые нужно предложить для сравнения, то их нужно вывести одно за другим, сразу после закрытия предыдущего, указав внизу окна сравнения, сколько предметов будет предложено, например, если предметов будет три, то надпись будет в формате "1/3". Окно должно иметь полупрозрачный чёрный фон и не должно иметь рамок во избежание бага, при котором они отделяются от окна при его перетаскивании. По умолчанию окно должно отображаться в центре экрана. Если окно было передвинуто, то его позиция должна сохраниться для текущего персонажа в файле настроек в папке SavedVariables.

3) Сравниваемая экипировка должна соответствовать приоритетам характеристик в зависимости от класса персонажа, причём экипировка серого качества должна сравниваться только по показателю брони, а белого качества и выше - по всем остальным характеристикам кроме брони. Также нужно учесть, что некоторые виды оружия могут быть использованы вместе, например:
- воины, паладины и шаманы могут использовать одноручные оружия вместе со щитами, а воины с талантом "Хватка титана" могут использовать два двуручника вместе или один двуручник вместе со щитом;
- у разбойников два одноручника могут быть использованы вместе;
- охотники и воины могут носить два одноручных оружия после изучения умения "Бой двумя оружиями";
- шаманы могут носить два одноручника с талантом "Бой двумя оружиями";
- стрелы могут быть использованы охотниками, воинами и разбойниками вместе с луками, арбалетами или огнестрелом;
- патроны могут быть использованы охотниками, воинами и разбойниками вместе с огнестрелом.

В таких случаях при сравнении характеристик нужно просчитывать характеристики обоих предметов вместе и при сравнении показывать в окне сравнения обе иконки таких предметов рядом, значения характеристик выводить просуммированными и под названием предлагаемого предмета писать надпись "вместе с:" и в следущей строке название второго предмета.

4) Экипировка должна предлагаться к надеванию не только по команде "/aeb equip" в чате, но и автоматически после изменения содержимого сумки или при входе в игру с задержкой в одну секунду во избежание многократного запуска скрипта в ситуации, когда в сумку сразу попадает много предметов.

5) При вводе в чат команды "/aeb" должно выводиться окно настроек с таким же фоном, как у окна сравнения и тоже без рамок. У него должен быть заголовок "Настройки AutoEquipBetter". В нём должны быть вкладки "Общие", "Исключения" и "Инфо".
Во вкладке "Общие" должны быть такие настройки:
- "Предлагать автоматически": чекбокс, по умолчанию включено, при выключенном состоянии лучшая экипировка не предлагается автоматически, а только по команде "/aeb equip";
- "Задержка автоэкипировки:" с полем ввода, по умолчанию 1, соответствует задержке автоматического предложения надевания после изменения содержимого сумки или при входе в игру;
- "Расположение окна:" - текст, справа или снизу от которого должны быть две кнопки - "Изменить" и "Сбросить". При нажатии на кнопку "Изменить" должен появиться полупрозрачный чёрный прямоугольник, повторяющий размер окна сравнения и его позицию, при его перетаскивании изменяется позиция окна сравнения и сохраняется для текущего персонажа в папке SavedVariables.

Во вкладке "Исключения" должен быть прокручиваемый список экипировки, добавленной в исключения при нажатии на кнопку "Игнор" в окне сравнения. Экипировка должна быть в алфавитном порядке с цветом названия предмета, соответствующего его качеству. Каждая строка должна быть кликабельной и при нажатии выделяться немного более светлым цветом фона. Под этим списком должны быть две кнопки - "Добавить" и "Удалить", а под ними строка с текстом "Введите название предмета для добавления в игнор-лист:", и ниже поле для ввода текста. При нажатии на кнопку "Добавить" название предмета, введённое в поле ниже, добавляется в список игнора с оповещением в чат, а при нажатии на кнопку "Удалить" предмет, выделенный в списке выше, удаляется из списка с оповещением в чат. Кнопка "Удалить" должна быть серой и не активной, пока не выбран элемент в списке экипировки. Также кнопка "Добавить" должна быть серой и не активной, пока не введён текст в поле под ней.

Во вкладке "Инфо" должна быть надпись "Автор аддона - KiM38RuS", причём имя автора должно быть выделено зелёным цветом. Ниже должна быть иконка Гитхаба и справа от неё кликабельная ссылка "https://github.com/KiM38RuS/AutoEquipBetter-3.3.5-experimental-"
Все эти настройки нужно продублировать во вкладке "Модификации" в настройках интерфейса самой игры.

6) При запуске аддона в чат должно выводиться текст "AutoEquipBetter запущен. Введите /aeb для открытия окна настроек"

Все функции и команды должны быть доступны в lua WoW 3.3.5, в коде должны быть комментарии, описывающие, за что отвечают функции и что происходит в данном участке кода.
